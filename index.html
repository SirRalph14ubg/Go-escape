<!DOCTYPE html><script nonce="kxl0_ZEgukJ81NIqdhcvCw">(function(){'use strict';function p(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var r=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,e){if(a==Array.prototype||a==Object.prototype)return a;a[b]=e.value;return a};
function t(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var e=a[b];if(e&&e.Math==Math)return e}throw Error("Cannot find global object");}var u=t(this);function v(a,b){if(b)a:{var e=u;a=a.split(".");for(var f=0;f<a.length-1;f++){var k=a[f];if(!(k in e))break a;e=e[k]}a=a[a.length-1];f=e[a];b=b(f);b!=f&&b!=null&&r(e,a,{configurable:!0,writable:!0,value:b})}}
v("Symbol",function(a){function b(h){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new e(f+(h||"")+"_"+k++,h)}function e(h,c){this.g=h;r(this,"description",{configurable:!0,writable:!0,value:c})}if(a)return a;e.prototype.toString=function(){return this.g};var f="jscomp_symbol_"+(Math.random()*1E9>>>0)+"_",k=0;return b});
v("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),e=0;e<b.length;e++){var f=u[b[e]];typeof f==="function"&&typeof f.prototype[a]!="function"&&r(f.prototype,a,{configurable:!0,writable:!0,value:function(){return w(p(this))}})}return a});function w(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function x(a){var b=typeof Symbol!="undefined"&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if(typeof a.length=="number")return{next:p(a)};throw Error(String(a)+" is not an iterable or ArrayLike");}function y(){this.j=!1;this.h=null;this.l=void 0;this.g=1;this.o=0;this.i=null}function z(a){if(a.j)throw new TypeError("Generator is already running");a.j=!0}y.prototype.m=function(a){this.l=a};function A(a,b){a.i={H:b,I:!0};a.g=a.o}
y.prototype.return=function(a){this.i={return:a};this.g=this.o};function E(a,b,e){a.g=e;return{value:b}}function F(a){this.g=new y;this.h=a}function G(a,b){z(a.g);var e=a.g.h;if(e)return H(a,"return"in e?e["return"]:function(f){return{value:f,done:!0}},b,a.g.return);a.g.return(b);return I(a)}
function H(a,b,e,f){try{var k=b.call(a.g.h,e);if(!(k instanceof Object))throw new TypeError("Iterator result "+k+" is not an object");if(!k.done)return a.g.j=!1,k;var h=k.value}catch(c){return a.g.h=null,A(a.g,c),I(a)}a.g.h=null;f.call(a.g,h);return I(a)}function I(a){for(;a.g.g;)try{var b=a.h(a.g);if(b)return a.g.j=!1,{value:b.value,done:!1}}catch(e){a.g.l=void 0,A(a.g,e)}a.g.j=!1;if(a.g.i){b=a.g.i;a.g.i=null;if(b.I)throw b.H;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function J(a){this.next=function(b){z(a.g);a.g.h?b=H(a,a.g.h.next,b,a.g.m):(a.g.m(b),b=I(a));return b};this.throw=function(b){z(a.g);a.g.h?b=H(a,a.g.h["throw"],b,a.g.m):(A(a.g,b),b=I(a));return b};this.return=function(b){return G(a,b)};this[Symbol.iterator]=function(){return this}}function K(a){function b(f){return a.next(f)}function e(f){return a.throw(f)}return new Promise(function(f,k){function h(c){c.done?f(c.value):Promise.resolve(c.value).then(b,e).then(h,k)}h(a.next())})}
v("Promise",function(a){function b(c){this.h=0;this.i=void 0;this.g=[];this.o=!1;var d=this.j();try{c(d.resolve,d.reject)}catch(g){d.reject(g)}}function e(){this.g=null}function f(c){return c instanceof b?c:new b(function(d){d(c)})}if(a)return a;e.prototype.h=function(c){if(this.g==null){this.g=[];var d=this;this.i(function(){d.l()})}this.g.push(c)};var k=u.setTimeout;e.prototype.i=function(c){k(c,0)};e.prototype.l=function(){for(;this.g&&this.g.length;){var c=this.g;this.g=[];for(var d=0;d<c.length;++d){var g=
c[d];c[d]=null;try{g()}catch(l){this.j(l)}}}this.g=null};e.prototype.j=function(c){this.i(function(){throw c;})};b.prototype.j=function(){function c(l){return function(m){g||(g=!0,l.call(d,m))}}var d=this,g=!1;return{resolve:c(this.C),reject:c(this.l)}};b.prototype.C=function(c){if(c===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof b)this.F(c);else{a:switch(typeof c){case "object":var d=c!=null;break a;case "function":d=!0;break a;default:d=!1}d?this.B(c):this.m(c)}};
b.prototype.B=function(c){var d=void 0;try{d=c.then}catch(g){this.l(g);return}typeof d=="function"?this.G(d,c):this.m(c)};b.prototype.l=function(c){this.v(2,c)};b.prototype.m=function(c){this.v(1,c)};b.prototype.v=function(c,d){if(this.h!=0)throw Error("Cannot settle("+c+", "+d+"): Promise already settled in state"+this.h);this.h=c;this.i=d;this.h===2&&this.D();this.J()};b.prototype.D=function(){var c=this;k(function(){if(c.A()){var d=u.console;typeof d!=="undefined"&&d.error(c.i)}},1)};b.prototype.A=
function(){if(this.o)return!1;var c=u.CustomEvent,d=u.Event,g=u.dispatchEvent;if(typeof g==="undefined")return!0;typeof c==="function"?c=new c("unhandledrejection",{cancelable:!0}):typeof d==="function"?c=new d("unhandledrejection",{cancelable:!0}):(c=u.document.createEvent("CustomEvent"),c.initCustomEvent("unhandledrejection",!1,!0,c));c.promise=this;c.reason=this.i;return g(c)};b.prototype.J=function(){if(this.g!=null){for(var c=0;c<this.g.length;++c)h.h(this.g[c]);this.g=null}};var h=new e;b.prototype.F=
function(c){var d=this.j();c.u(d.resolve,d.reject)};b.prototype.G=function(c,d){var g=this.j();try{c.call(d,g.resolve,g.reject)}catch(l){g.reject(l)}};b.prototype.then=function(c,d){function g(n,q){return typeof n=="function"?function(B){try{l(n(B))}catch(C){m(C)}}:q}var l,m,D=new b(function(n,q){l=n;m=q});this.u(g(c,l),g(d,m));return D};b.prototype.catch=function(c){return this.then(void 0,c)};b.prototype.u=function(c,d){function g(){switch(l.h){case 1:c(l.i);break;case 2:d(l.i);break;default:throw Error("Unexpected state: "+
l.h);}}var l=this;this.g==null?h.h(g):this.g.push(g);this.o=!0};b.resolve=f;b.reject=function(c){return new b(function(d,g){g(c)})};b.race=function(c){return new b(function(d,g){for(var l=x(c),m=l.next();!m.done;m=l.next())f(m.value).u(d,g)})};b.all=function(c){var d=x(c),g=d.next();return g.done?f([]):new b(function(l,m){function D(B){return function(C){n[B]=C;q--;q==0&&l(n)}}var n=[],q=0;do n.push(void 0),q++,f(g.value).u(D(n.length-1),m),g=d.next();while(!g.done)})};return b});
function L(a,b){a instanceof String&&(a+="");var e=0,f=!1,k={next:function(){if(!f&&e<a.length){var h=e++;return{value:b(h,a[h]),done:!1}}f=!0;return{done:!0,value:void 0}}};k[Symbol.iterator]=function(){return k};return k}v("Array.prototype.keys",function(a){return a?a:function(){return L(this,function(b){return b})}});(function(){var a,b,e,f,k;return K(new J(new F(function(h){switch(h.g){case 1:if(!("serviceWorker"in navigator)){h.g=0;break}return E(h,navigator.serviceWorker.getRegistration("../.."),3);case 3:return(a=h.l)?E(h,a.unregister(),4):h.return();case 4:return window.caches==null?h.return():E(h,window.caches.keys(),5);case 5:b=h.l,e=x(b),f=e.next();case 6:if(f.done){h.g=0;break}k=f.value;return E(h,window.caches.delete(k),7);case 7:f=e.next(),h.g=6}})))})();}).call(this);
</script><script src="https://sdks.gamesnacks.com/developer/v2/index.js" data-target-origin="https://gamesnacks.com" data-user-activity-metrics data-run-slotcar-ads-in-game-center data-game-center-monetized data-rewarded-monetizable data-interstitial-monetizable data-level-complete-monetizable data-game-over-monetizable nonce="kxl0_ZEgukJ81NIqdhcvCw"></script><meta name="robots" content="noindex, nofollow"><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
  <!-- Start loading assets right away, to have them (partly) loaded already when they are requested -->
  <link rel="preload" href="Build//Build.data.unityweb" as="fetch" type="application/octet-stream" crossorigin="">
  <link rel="preload" href="Build/Build.framework.js.unityweb" as="script">
  <link rel="preload" href="Build/Build.wasm.unityweb" as="fetch" type="application/wasm" crossorigin="">
  
  <script src="game-interface.js?gameId=go-escape"></script>
  
  <title>Go Escape</title>
  <style>
    * {
      padding: 0;
      margin: 0;
    }

    html {
      /* fix mobile viewport menu bar on iOS */
      height: -webkit-fill-available;
    }

    body {
      height: 100%;
      /* fix mobile viewport menu bar on iOS */
      height: -webkit-fill-available;
      width: 100%;
      text-align: center;
    }

    #unity-container {
      position: absolute;
      left: 0px;
      top: 0px;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Default values, might be overwritten by aspect ratio media queries */
    #unity-canvas {
      width: 100%;
      height: 100%;
      background-color: #fff;
    }



    #unity-loading-container {
      position: absolute;
      left: 0px;
      top: 0px;
      width: 100%;
      height: 100%;
      background-color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 40px;

      opacity: 1;
      visibility: visible;
      transition: 800ms linear;
    }

    #unity-loading-container.finished {
      opacity: 0;
      visibility: collapse;
    }

    #unity-loading-container .logo {
      width: 15%;
      height: 15%;
    }

    #unity-loading-bar {
      position: relative;
      width: 40%;
      height: 10px;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
    }

    #unity-loading-bar-inner {
      position: absolute;
      left: 0%;
      top: 0%;
      width: 1%;
      height: 100%;
      background-color: #ccc;
      border-radius: 10px;
      transition: 400ms linear;
    }
	
	#x_unity-loading-bar {
      position: relative;
      width: 40%;
      height: 10px;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
    }

    #x_unity-loading-bar-inner {
      position: absolute;
      left: 0%;
      top: 0%;
      width: 1%;
      height: 100%;
      background-color: #ccc;
      border-radius: 10px;
      transition: 400ms linear;
    }
  </style><body><div id="unity-container">
    <canvas id="unity-canvas"></canvas>
  </div>
  <div id="unity-loading-container">
    <div id="unity-loading-bar">
      <div id="unity-loading-bar-inner"></div>
    </div>
  </div>
  
  <div id="x_ovl" style="width:100%; height:100%;position: absolute; background-color: #fff; display: flex; flex-direction: column; align-items: center; justify-content: center;">
	<div id="x_unity-loading-bar">
      <div id="x_unity-loading-bar-inner"></div>
    </div>
  </div>
  
  <script>
    window.GameInterface.init(["Build/Build.loader.js", async function() {
		var buildUrl = "Build";
		var loaderUrl = buildUrl + "/Build.loader.js";
		var config = {
		  dataUrl: buildUrl + "/Build.data.unityweb",
		  frameworkUrl: buildUrl + "/Build.framework.js.unityweb",
		  codeUrl: buildUrl + "/Build.wasm.unityweb",
		  streamingAssetsUrl: "StreamingAssets",
		  companyName: "tastypill",
		  productName: "Go Escape",
		  productVersion: "1.79.0",
		};

		var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
		if(isMobile) {
		  // Define a maximum pixel ratio for mobile to avoid rendering at too high resolutions
		  const maxPixelRatioMobile = 2.0;
		  config.devicePixelRatio = Math.min(window.devicePixelRatio, maxPixelRatioMobile);
		}

		var canvas = document.querySelector("#unity-canvas");
		var loadingContainer = document.querySelector("#unity-loading-container");
		var loadingBar = document.querySelector("#unity-loading-bar-inner");
		
		const url = "Localization.json";
		try {
			const response = await fetch(url);
			if (response.ok) {
				const str = await response.text();
				window.LocalizationData = str;
			}
		} catch (error) {}

		var unityGame;
		var script = document.createElement("script");
		script.src = loaderUrl;
		script.onload = function() {
		  //let prevProgress = -1;
		  createUnityInstance(canvas, config, function(progress) {
			loadingBar.style.width = 100 * progress + "%";
			//let curProgress = 100 * progress;
			//if (curProgress != prevProgress) window.GameInterface.sendPreloadProgress(curProgress);
			//prevProgress = curProgress;
		  }).then(function(unityInstance) {
			unityGame = unityInstance;
			loadingContainer.classList.add("finished");
		  }).catch(function(message) {
			alert(message);
		  });
		};
		document.body.appendChild(script);
	}]).then(result => {
      // start the game...
    });
	
	var ended = false;
	var curMaxPerc = 80;
	requestAnimationFrame(updt);
	window.onGameStarted = function () {
		document.getElementById("x_ovl").remove();
		ended = true;
		
		window.GameInterface.sendPreloadProgress(100);
	}
	
	let prevProgress = -1;
	let numFramesPercCorrect = 0;
	function updt() {
		let perc = Number(document.getElementById("unity-loading-bar-inner").style.width.replace("%", ""));
		if (perc == 90 && numFramesPercCorrect < 30) {
			numFramesPercCorrect++;
			perc = 0;
		}
		else if (perc > 0 && perc != 90 && numFramesPercCorrect < 30) {
			numFramesPercCorrect = 100;
		}
		if (perc >= 99.9) {
			perc = curMaxPerc;
			curMaxPerc += 0.05;
			if (curMaxPerc > 98) curMaxPerc = 98;
		}
		else perc = perc * 0.8;
		
		let curProgress = Math.floor(perc);
		if (!ended && curProgress != prevProgress && window.GameInterface !== undefined && window.GameInterface.sendPreloadProgress !== undefined) window.GameInterface.sendPreloadProgress(curProgress);
		prevProgress = curProgress;
	
		if (!ended) document.getElementById("x_unity-loading-bar-inner").style.width = perc + "%";
		if (!ended) requestAnimationFrame(updt);
	}
  </script>